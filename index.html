<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building Map Application</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <header>
            <div class="header-left">
                <img src="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31" alt="Microsoft" class="microsoft-logo">
            </div>
            <h1>Meeting Room Management</h1>
            <div class="header-right">
                <div class="user-profile">
                    <div class="user-info">
                        <span class="user-name" id="currentUserName">ITSM Admin</span>
                        <span class="user-role" id="currentUserRole">IT Service Management</span>
                    </div>
                    <div class="user-actions">
                        <button class="switch-user-btn" onclick="app.showUserSwitcher()" title="Switch User">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16 17v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-9a2 2 0 012-2h2m3.5 6L16 12m0 0l-5.5-4M16 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="ab-logo-container">
                    <div class="ab-logo" id="userAvatar">AB</div>
                </div>
            </div>
        </header>
        
        <main>
            <!-- Region Selector Sidebar -->
            <div id="regionSidebar" class="region-sidebar">
                <div class="sidebar-header">
                    <h3>üìç Microsoft Offices</h3>
                </div>
                <div class="sidebar-content">
                    <div class="region-list">
                        <div class="region-item active" data-region="hyderabad">
                            <div class="region-header">
                                <div class="region-flag">üáÆüá≥</div>
                                <div class="region-info">
                                    <div class="region-name">Hyderabad</div>
                                    <div class="region-country">India</div>
                                </div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                            <div class="campus-list">
                                <div class="campus-item active" data-campus="hyderabad-microsoft-campus">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Microsoft Campus</span>
                                </div>
                                <div class="campus-item" data-campus="hyderabad-phoenix-standalone">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Phoenix Building</span>
                                </div>
                            </div>
                        </div>
                        <div class="region-item" data-region="bangalore">
                            <div class="region-header">
                                <div class="region-flag">üáÆüá≥</div>
                                <div class="region-info">
                                    <div class="region-name">Bangalore</div>
                                    <div class="region-country">India</div>
                                </div>
                                <div class="expand-icon">‚ñ∂</div>
                            </div>
                            <div class="campus-list collapsed">
                                <div class="campus-item" data-campus="bangalore-main-campus">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Main Campus</span>
                                </div>
                            </div>
                        </div>
                        <div class="region-item" data-region="noida">
                            <div class="region-header">
                                <div class="region-flag">üáÆüá≥</div>
                                <div class="region-info">
                                    <div class="region-name">Noida</div>
                                    <div class="region-country">India</div>
                                </div>
                                <div class="expand-icon">‚ñ∂</div>
                            </div>
                            <div class="campus-list collapsed">
                                <div class="campus-item" data-campus="noida-microsoft-campus">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Microsoft Campus</span>
                                </div>
                                <div class="campus-item" data-campus="noida-taj-building">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Taj Building</span>
                                </div>
                            </div>
                        </div>
                        <div class="region-item" data-region="redmond">
                            <div class="region-header">
                                <div class="region-flag">üá∫üá∏</div>
                                <div class="region-info">
                                    <div class="region-name">Redmond</div>
                                    <div class="region-country">USA</div>
                                </div>
                                <div class="expand-icon">‚ñ∂</div>
                            </div>
                            <div class="campus-list collapsed">
                                <div class="campus-item" data-campus="redmond-main-campus">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Main Campus</span>
                                </div>
                            </div>
                        </div>
                        <div class="region-item" data-region="phoenix">
                            <div class="region-header">
                                <div class="region-flag">üá∫üá∏</div>
                                <div class="region-info">
                                    <div class="region-name">Phoenix</div>
                                    <div class="region-country">USA</div>
                                </div>
                                <div class="expand-icon">‚ñ∂</div>
                            </div>
                            <div class="campus-list collapsed">
                                <div class="campus-item" data-campus="phoenix-standalone">
                                    <span class="campus-icon">üè¢</span>
                                    <span class="campus-name">Phoenix Office</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-toggle" id="sidebarToggle">
                        <span class="toggle-icon">‚óÄ</span>
                    </div>
                </div>
                
                <!-- Region Statistics -->
                <div class="region-stats" id="regionStats">
                    <div class="stats-title" id="statsTitle">Current Region</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="statBuildings">4</div>
                            <div class="stat-label">Buildings</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="statRooms">45</div>
                            <div class="stat-label">Total Rooms</div>
                        </div>
                        <div class="stat-item stat-available">
                            <div class="stat-number" id="statAvailable">38</div>
                            <div class="stat-label">Available</div>
                        </div>
                        <div class="stat-item stat-maintenance">
                            <div class="stat-number" id="statMaintenance">3</div>
                            <div class="stat-label">Maintenance</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map Container -->
            <div id="map"></div>
            
            <!-- Building Details Modal -->
            <div id="buildingModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2 id="buildingTitle">Building Details</h2>
                    <div id="buildingInfo">
                        <p id="buildingAddress"></p>
                        <div id="floorsContainer">
                            <h3>Floors</h3>
                            <div id="floorsList"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Floor Plan Modal -->
            <div id="floorModal" class="modal">
                <div class="modal-content floor-modal-content">
                    <span class="close">&times;</span>
                    <div class="floor-header">
                        <h2 id="floorTitle">Floor Plan</h2>
                        <button id="backToBuilding" class="btn-secondary">‚Üê Back to Building</button>
                    </div>
                    <div id="floorPlan">
                        <div id="roomsGrid"></div>
                    </div>
                </div>
            </div>
            
            <!-- Room Details Modal -->
            <div id="roomModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2 id="roomTitle">Meeting Room Details</h2>
                    <div id="roomInfo">
                        <div class="room-status">
                            <span id="roomStatusBadge" class="status-badge"></span>
                            <span id="roomStatusText"></span>
                        </div>
                        <div id="roomCapacity"></div>
                        <div id="roomEquipment"></div>
                        <div id="roomProblems" class="room-problems"></div>
                        <div id="dispatchSection" class="dispatch-section">
                            <button id="dispatchEngineerBtn" class="dispatch-btn">
                                üîß Dispatch Engineer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Engineer Dispatch Modal -->
            <div id="dispatchModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>üîß Dispatch Engineer Request</h2>
                    <div id="dispatchForm">
                        <div class="form-group">
                            <label for="urgencyLevel">Priority Level:</label>
                            <select id="urgencyLevel" class="form-input">
                                <option value="Low">Low Priority</option>
                                <option value="Medium">Medium Priority</option>
                                <option value="High" selected>High Priority</option>
                                <option value="Critical">Critical Priority</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="problemCategory">Problem Category:</label>
                            <select id="problemCategory" class="form-input">
                                <option value="Equipment">Equipment Failure</option>
                                <option value="Network">Network Issues</option>
                                <option value="Climate">Climate Control</option>
                                <option value="Security">Security Systems</option>
                                <option value="Facility">General Facility</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="requestDescription">Additional Details:</label>
                            <textarea id="requestDescription" class="form-input" rows="4" 
                                placeholder="Describe the issue in detail..."></textarea>
                        </div>
                        
                        <div class="engineer-assignment">
                            <h3>üìã Engineer Assignment</h3>
                            <div id="assignedEngineer" class="engineer-info">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button id="cancelDispatch" class="btn-secondary">Cancel</button>
                            <button id="confirmDispatch" class="btn-primary">Confirm Dispatch</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Notification Container -->
        <div id="notificationContainer"></div>
        
        <!-- User Switcher Modal -->
        <div id="userSwitcherModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Switch User</h3>
                    <span class="close" onclick="app.closeUserSwitcher()">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="user-selector">
                        <div class="user-option" onclick="app.switchToUser('itsm')">
                            <div class="user-avatar">AB</div>
                            <div class="user-details">
                                <div class="user-name">ITSM Admin</div>
                                <div class="user-role">IT Service Management</div>
                                <div class="user-description">Manage maintenance issues and room assignments</div>
                            </div>
                            <div class="current-indicator" id="itsmIndicator">Current</div>
                        </div>
                        <div class="user-option" onclick="app.switchToUser('dispatch')">
                            <div class="user-avatar">SC</div>
                            <div class="user-details">
                                <div class="user-name">Sarah Chen</div>
                                <div class="user-role">Dispatch Agent</div>
                                <div class="user-description">Review and acknowledge assigned maintenance tasks</div>
                            </div>
                            <div class="current-indicator" id="dispatchIndicator" style="display: none;">Current</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Microsoft Copilot Assistant -->
        <div id="copilotAssistant" class="copilot-assistant">
            <button class="copilot-btn" onclick="app.toggleCopilotChat()" title="Microsoft Copilot Assistant">
                <div class="copilot-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/>
                        <circle cx="12" cy="8" r="2" fill="currentColor"/>
                        <path d="M12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="currentColor" opacity="0.7"/>
                    </svg>
                </div>
                <span class="copilot-text">Copilot</span>
            </button>
            <div class="copilot-badge">AI</div>
        </div>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    
    <!-- Custom JavaScript -->
    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>